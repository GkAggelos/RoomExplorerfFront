<div class="container rounded bg-white mt-5"  *ngIf="ishost">
    <div class="row">
        <div class="col-md-4 border-right">
            <h1 class="fw-light text-center text-lg-start mt-4 mb-0">Photos</h1>
            <hr class="mt-2 mb-5">
            <div class="row text-center text-lg-start" *ngFor="let photo of photos" id="main-container">
                <a role="button" (click)="onOpenModal(photo)">
                    <img class="img-fluid img-thumbnail" src="{{photo.url}}" alt="">
                </a>
            </div>
        </div>
        <div class="col-md-8">
            <div class="p-3 py-5">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h4 class="text">Edit Residence</h4>
                </div>
                <form #editForm="ngForm" (ngSubmit)="onEditResidence(editForm)">
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="start">Start Available Date</label>
                                <input type="date" ngModel="{{residence.available_from}}" name="startDate" class="form-control" id="start" #startInput="ngModel" required> 
                                <div class="help-is-error" *ngIf="startInput.invalid && startInput.touched">
                                    Start available date is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group"> 
                                <label for="end">End Available Date</label>
                                <input type="date" ngModel="{{residence.available_till}}" name="endDate" class="form-control" id="end" #endInput="ngModel" required> 
                                <div class="help-is-error" *ngIf="endInput.invalid && endInput.touched">
                                    End available date is required.
                                </div>
                            </div> 
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="location">Location</label>
                                <input type="text" ngModel="{{residence.location}}" name="location" class="form-control" id="location" placeholder="Type location" #locationInput="ngModel" required> 
                                <div class="help-is-error" *ngIf="locationInput.invalid && locationInput.touched">
                                    Location is required.
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group"> 
                                <label for="roomType">Room Type</label> 
                                <select ngModel="{{residence.roomType}}" name="roomType" class="form-control" #roomTypeInput="ngModel" required> 
                                    <option value="0">Private room</option> 
                                    <option value="1">Shared room</option> 
                                    <option value="2">Whole building</option> 
                                </select>
                            </div> 
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="form-group"> 
                                <label for="Area">Area</label> 
                                <input type="number" ngModel="{{residence.area}}" name="area" class="form-control" id="area" placeholder="Type area number" #areaInput="ngModel" required> 
                            </div>
                            <div class="help-is-error" *ngIf="areaInput.invalid && areaInput.touched">
                                Area is required.
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group"> 
                                <label for="floor">Floor</label> 
                                <input ngModel="{{residence.floor}}" name="floor" type="number" class="form-control" id="floor" placeholder="Type floor number" #floorInput="ngModel" required> 
                            </div>
                            <div class="help-is-error" *ngIf="floorInput.invalid && floorInput.touched">
                                Floor is required.
                            </div> 
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="form-group"> 
                                <label for="pricing">Price</label> 
                                <input type="text" ngModel="{{residence.pricing}}" name="pricing" class="form-control" id="pricing" placeholder="Type price" #priceInput="ngModel" required> 
                            </div>
                            <div class="help-is-error" *ngIf="priceInput.invalid && priceInput.touched">
                                Price is required.
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="peopleCapacity">People Capacity</label> 
                                <input ngModel="{{residence.peopleCapacity}}" name="peopleCapacity" type="number" class="form-control" id="peopleCapacity" placeholder="Type people capacity"
                                #capacityInput="ngModel" required> 
                            </div>
                            <div class="help-is-error" *ngIf="capacityInput.invalid && capacityInput.touched">
                                People capacity is required.
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="form-group"> 
                                <label for="BedNumber">Bed Number</label> 
                                <input type="number" ngModel="{{residence.bedNumber}}" name="bedNumber" class="form-control" id="bedNumber" placeholder="Type number of beds" #areaInput="ngModel" required> 
                            </div>
                            <div class="help-is-error" *ngIf="areaInput.invalid && areaInput.touched">
                                Bed Number is required.
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="bathroomNumber">Bathroom Number</label> 
                                <input ngModel="{{residence.bathroomNumber}}" name="bathroomNumber" type="number" class="form-control" id="bathroomNumber" placeholder="Type bathroom number" #capacityInput="ngModel" required> 
                            </div>
                            <div class="help-is-error" *ngIf="capacityInput.invalid && capacityInput.touched">
                                Bathroom number is required.
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="form-group"> 
                                <label for=" BedroomNumber">Bedroom Number</label> 
                                <input type="number" ngModel="{{residence.bedroomNumber}}" name="bedroomNumber" class="form-control" id="bedroomNumber" placeholder="Type number of bedrooms" #areaInput="ngModel" required> 
                            </div>
                            <div class="help-is-error" *ngIf="areaInput.invalid && areaInput.touched">
                                Bedroom Number is required.
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="acreage">Acreage</label> 
                                <input ngModel="{{residence.acreage}}" name="acreage" type="number" class="form-control" id="acreage" placeholder="Type acreage" #capacityInput="ngModel" required> 
                            </div>
                            <div class="help-is-error" *ngIf="capacityInput.invalid && capacityInput.touched">
                                Acreage is required.
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="form-check">
                                <input class="form-check-input" ngModel name="wifi" type="checkbox" value="wifi" id="wifi" [(ngModel)] = "isWifiChecked">
                                <label class="form-check-label" for="wifi">
                                    Wifi
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" ngModel name="heating" type="checkbox" value="heating" id="heating" [(ngModel)] = "isHeatingChecked">
                                <label class="form-check-label" for="heating">
                                    Heating
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" ngModel name="air_condition" type="checkbox" value="air_condition" id="air_condition" [(ngModel)] = "isAirConditionChecked">
                                <label class="form-check-label" for="air_condition">
                                    Air Condition
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" ngModel name="cuisine" type="checkbox" value="cuisine" id="cuisine" [(ngModel)] = "isCuisineChecked">
                                <label class="form-check-label" for="cuisine">
                                    Cuisine
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-check">
                                <input class="form-check-input" ngModel name="tv" type="checkbox" value="tv" id="tv" [(ngModel)] = "isTvChecked">
                                <label class="form-check-label" for="tv">
                                    Tv
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" ngModel name="parking" type="checkbox" value="parking" id="parking" [(ngModel)] = "isParkingChecked">
                                <label class="form-check-label" for="parking">
                                    Parking
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" ngModel name="elevator" type="checkbox" value="elevator" id="elevator" [(ngModel)] = "isElevatorChecked">
                                <label class="form-check-label" for="elevator">
                                    Elevator
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" ngModel name="living_room" type="checkbox" value="living_room" id="living_room" [(ngModel)] = "isLivingRoomChecked">
                                <label class="form-check-label" for="living_room">
                                    Living room
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="row justify-content-center"> 
                        <div class="form-group files">
                            <label class="my-auto">Upload Photo</label> 
                            <input ngModel name="photo" id="file" type="file" class="form-control" #photoInput="ngModel" (change)="onSelect($event)" multiple />
                            <p *ngFor="let name of names"> {{name}}<br> </p>
                        </div> 
                    </div>
                    <div class="form-group"> 
                        <label for="exampleFormControlTextarea1">Description</label> 
                        <textarea ngModel="{{residence.description}}" name="description" class="form-control rounded-0"  id="exampleFormControlTextarea1" rows="5"></textarea>
                    </div> 
                    <div class="form-group"> 
                        <label for="exampleFormControlTextarea2">Comments</label> 
                        <textarea ngModel="{{residence.comment}}" name="comment" class="form-control rounded-0" id="exampleFormControlTextarea2" rows="5"></textarea>
                    </div> 
                    <div class="mt-5 text-right"><button [disabled]="editForm.invalid" type="submit" class="btn btn-primary profile-button">Save changes</button></div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Delete Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModelLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModelLabel">Delete Photo</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this photo?</p>
                <img class="img-fluid img-thumbnail" src="{{deletePhoto.url}}" alt="">
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                    <button (click)="onDeletePhoto(deletePhoto.id)" class="btn btn-danger" data-dismiss="modal">Yes</button>
                </div>
            </div>
        </div>
    </div>
</div>
